//stop watch programm
//
//
ORG  0000H
LJMP MAIN
ORG 000BH
   	
NN:	JNB P3.6,CCC
	MOV P0,#40H
	MOV P1,#0FFH
	RETI

CCC:MOV R2,#10
	MOV DPTR,#400H
UP:	CLR A
	MOVC A,@A+DPTR
	MOV @R0,A
	MOV @R1,A
	INC DPTR
	INC R0
	INC R1
	DJNZ R2,UP
	
	MOV R5,10H
	MOV R1,#20H
	MOV R6,#10
UP4:MOV R4,#10
	MOV R1,#10H
UP3:MOV R3,#10
	MOV	R0,#10H
	
UP2:MOV DPTR,#400H
	MOV R2,#10
UP1:CLR A
	MOVC A,@A+DPTR

	MOV R7,#5
PP:	
   	JB P3.5,DDD
EEE:MOV P0,A
	SETB P1.0
	ACALL DELAY
	CLR P1.0
	MOV P0,@R0
	SETB P1.1
	ACALL DELAY
	CLR P1.1
	MOV P0,@R1
	SETB P1.2
	ACALL DELAY
	CLR P1.2
	MOV P0,R5
	SETB P1.3
	ACALL DELAY
	CLR P1.3
	JNB P3.6,DDD
	JNB P3.4,NN
	SJMP EEE 
DDD:MOV P0,A
	SETB P1.0
	ACALL DELAY
	CLR P1.0
	
	MOV P0,@R0
	SETB P1.1
	ACALL DELAY
	CLR P1.1
	
	
	MOV P0,@R1
	SETB P1.2
	ACALL DELAY
	CLR P1.2
	
	MOV P0,R5
	SETB P1.3
	ACALL DELAY
	CLR P1.3
	JNB P3.4,NN
	DJNZ R7,PP
	
	INC DPTR

	DJNZ R2,UP1

	INC R0
	MOV P0,@R0
	SETB P1.1
	ACALL DELAY
	CLR P1.1
	
	DJNZ R3,UP2

	INC R1
	MOV P0,@R1
	SETB P1.2
	ACALL DELAY
	CLR P1.2
	
	DJNZ R4,UP3

		CJNE R6,#10,AGAIN
		MOV R5,11H
		SJMP NNN
AGAIN:	CJNE R6,#9,AGAIN2
		MOV R5,12H
		SJMP NNN
AGAIN2:	CJNE R6,#8,AGAIN3
		MOV R5,13H
		SJMP NNN
AGAIN3:	CJNE R6,#7,AGAIN4
		MOV R5,14H
		SJMP NNN
AGAIN4:	CJNE R6,#6,AGAIN5
		MOV R5,15H
		SJMP NNN
AGAIN5:	CJNE R6,#5,AGAIN6
		MOV R5,16H
		SJMP NNN 
AGAIN6:	CJNE R6,#4,AGAIN7
		MOV R5,17H
		SJMP NNN
AGAIN7:	CJNE R6,#3,AGAIN8
		MOV R5,18H
		SJMP NNN 
AGAIN8:	CJNE R6,#2,NNN
		MOV R5,19H
		SJMP NNN 
NNN:	MOV P0,R5
		SETB P1.3
		ACALL DELAY
		CLR P1.3
		DEC R6
		CJNE R6,#1,NEXT
CC:		RETI
NEXT:	LJMP UP4

ORG 0700H

MAIN:	

   	    MOV R0,#10H
	    MOV R1,#20H
        MOV P1,#0FFH
	  	MOV P0,#00H
	   	MOV P3,#0FFH
	   	MOV P1,#00H
		MOV TMOD,#01H
		MOV IE,#82H
		MOV TL0,#066H
		MOV TH0,#0FCH

		SETB TR0
		SJMP $

DELAY: 
AA:	MOV TL0,#070H
	MOV TH0,#0FCH
HERE:JNB TF0,HERE
	CLR TF0	 
				
	RET

ORG 0400H
DB 40H,79H,24H,30H,19H,12H,02H,78H,00H,10H

END